\documentclass[12pt, twoside, openany]{report}
\usepackage[dvips]{graphicx,color,rotating}
\usepackage[cp1250]{inputenc}
\usepackage{t1enc}
\usepackage{url}
\usepackage{a4wide}
\usepackage{listings}
\renewcommand\lstlistingname{Kod}
\renewcommand\lstlistlistingname{Spis fragmentów kodu}
\lstset{basicstyle=\footnotesize, numbers=left, showspaces=false,showtabs=false,breaklines=true,showstringspaces=false,breakatwhitespace=true,frame=trBL, escapeinside={(*@}{@*)}}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{enumerate}
\usepackage{verbatim}
\usepackage[MeX]{polski}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\geometry{left=25mm,right=25mm,%
bindingoffset=10mm, top=25mm, bottom=25mm}
\usepackage{amssymb, latexsym}
\usepackage{amsthm}
\usepackage{palatino}
\usepackage{array}
\usepackage{pstricks}
\usepackage{textcomp}
\theoremstyle{definition}
\newtheorem{theorem}{Twierdzenie}[section]
\newtheorem{remark}{Uwaga}[section]
\newtheorem{definition}{Definicja}[section]
\newtheorem{alg}{Algorytm}[chapter]
\newtheorem{prz}{Przypadek}[section]
\newtheorem{np}{Przyk³ad}[section]
\newtheorem{lemma}[theorem]{Lemat}
\linespread{1.5}
\newcommand*{\norm}[1]{\left\Vert{#1}\right\Vert}
\newcommand*{\abs}[1]{\left\vert{#1}\right\vert}
\newcommand*{\om}{\omega}

\author{Autor}
\title{Tytu³ pracy}

\begin{document}

% Za¿ó³æ gêœl¹ jaŸñ.
\begin{titlepage}
\pagestyle{empty}

\noindent
\begin{Large}
\begin{table}[t]
\centering
\begin{tabular}[t]{lcr}
 \includegraphics[width=100pt,height=100pt]{UG_Logo_PL}\\
\end{tabular}
\end{table}
\begin{center}
	\fontsize{15}{12}\selectfont
WYDZIA£ MATEMATYKI\\
FIZYKI I INFORMATYKI
\end{center} 
% \vfill
\begin{center}PRACA LICENCJACKA\end{center}
\begin{center}INFORMATYKA\end{center}\end{Large}
% \vfill
\begin{center}
\Huge
\textbf{ 
System rejestrowania usterek i napraw}
\end{center}
% \vfill\vfill
\vfill
\begin{center}
\Large
Autor:\\
\LARGE
Dominika Pienczyn
\end{center}
\vfill
\begin{center}
\Large
Promotor: dr W³odzimierz Bzyl
\end{center}
\vfill
\begin{center}
\large
Gdañsk 2017
\end{center}
\newpage
\hfill
\begin{table}[b]
\centering
\begin{tabular}[t]{ccc}
............................................. & \hspace*{100pt} & .............................................\\
podpis promotora & \hspace*{100pt} & podpis autora
\end{tabular}
\end{table}


% \maketitle
\end{titlepage}
\thispagestyle{empty}
\newpage
\pagestyle{headings}
\setcounter{page}{1}
\hyphenation{Syl-ves-tra}
\hyphenation{Syl-ves-ter-a}
%streszczenie%
\begin{abstract}
Praca przedstawia aplikacje internetow¹ o nazwie "Awaria" która jest systemem rejestruj¹cym usterki oraz naprawy sprzêtu i zosta³a stworzona w grupie 3-osobowej. Jako cel, postawi³am sobie wykonanie frontendu aplikacji oraz stworzenie poszczególnych elementów takich jak: automatyzacja powiadomieñ, filtracja danych, uaktywnienie resetowania has³a oraz e-maili powitalnych podczas rejestracji. Do stworzenia aplikacji wykorzystano system Linux, baze danych Postgresql, framework Ruby on Rails oraz Bootstrap a nastêpnie wdro¿ono j¹ na serwer Heroku. Wgl¹d do szerszej dokumentacji mo¿liwy jest pod adresem https://github.com/dpienczyn/awaria1, przechowywany w repozytorium Githuba razem z kodem aplikacji.
\end{abstract}



%-----------Pocz¹tek czêœci zasadniczej-----------

\chapter{1. Wstêp}

Graficzny interfejs u¿ytkownika to ogólne okreœlenie sposobu prezentacji informacji przez komputer oraz interakcji z u¿ytkownikiem, polegaj¹ce na rysowaniu i obs³ugiwaniu wid¿etów. G³ównym aspektem tworzonego interfejsu jest optymalne rozmieszczenie elementów na stronie zgodnie z ergonomi¹ pracy oraz szata graficzna która pe³ni wa¿n¹ rolê dope³niaj¹c¹ i pomaga prowadziæ u¿ytkowników przez strukturê informacji prezentowan¹ w serwisie. Kolejnym istotnym elementem jest to aby aplikacja by³a responsywna. W dzisiejszym œwiecie korzystamy z ró¿nego typu urz¹dzeñ noœnych tzn tabletów, smartfonów itp. dlatego tak wa¿ne jest to aby aplikacja umia³a dopasowaæ sie do ka¿dej rozdzielczoœci i ka¿dego noœnika automatycznie. Od prawid³owo zaprojektowanego interfejsu zale¿y sukces strony, wygoda, intuicyjnoœæ oraz odpowiednia funkcjonalnoœæ. W mojej pracy zamierzam przedstawiæ to w jak prosty i skuteczny sposób mo¿na zmieniæ szatê graficzn¹ aplikacji oraz kilka innych elementów które umo¿liwi³y zwiêkszenie funkcjonowania danego systemu.

\chapter{2. Wykorzystane technologie}

\subsection{Ruby on Rails}
W utworzonym projekcie wykorzystano jêzyk Ruby wersje 2.3 oraz Framework Rails wersja 5.0.0. Ruby on rails jest frameworkiem open source i wykorzystuje siê go do tworzenia aplikacji webowych. Napisany zosta³ z wykorzystaniem architektury MVC \emph{(ang. Model-View-Controller)}.\\


\textbf{Modele} \emph{(ang. Model)} reprezentuj¹ dane aplikacji i s³u¿¹ do manipulowania tymi danymi. W Railsach jest tak ¿e jeden model odpowiada jednej tabeli w bazie danych.\\


\textbf{Widoki} \emph{(ang. View)} tworz¹ interfejs u¿ytkownika aplikacji i s³u¿¹ do dostarczania danych do przegl¹darki internetowej b¹dŸ innego urz¹dzenia. S¹ to pliki zawieraj¹ce kod w jêzyku Ruby i HTML.\\

\textbf{Kontrolery} \emph{(ang. Controller)} w nich znajduje siê ca³a logika aplikacji, maj¹ za zadanie po³¹czyæ model i widok. Odpowiadaj¹ za przetwarzanie ¿¹dañ przychodz¹cych z przegl¹darki internetowej, za pozyskiwanie danych z modeli oraz przekazanie ich do widoków w celu ich reprezentacji.

\subsection{Bootstrap} 
Bootstrap – Framework CSS, zawiera wiele narzêdzi które przydaj¹ siê podczas tworzenia interfejsu graficznego stron oraz aplikacji internetowych. Jest bardzo prosty w obs³udze, nie potrzeba wiele umiejêtnoœci ¿eby zacz¹æ z nim pracowaæ. Wystarczy podstawowa wiedza by rozpocz¹æ tworzyæ coœ w³asnego. Bootstrap bazuje g³ównie na gotowych rozwi¹zaniach HTML i CSS. Mo¿e byæ u¿ywany do stylizacji m.in. przycisków, formularzy, wykresów nawigacji oraz innych komponentów wyœwietlanych na stronie. Framework korzysta równie¿ z jêzyka JavaScripts. By zacz¹æ korzystaæ z platformy Bootstrap nale¿y w pliku Gemfile dodaæ gem który odpowiedzialny jest za odpowiednie funkcjonowanie Frameworka.

\begin{center}
	\textbf{\textit{gem ‘bootstrap-sass’, ‘~> 3.3.7’}}
\end{center}
Bootstrap jest platform¹ stylów CSS wiêc ka¿dy kod powinien, zapisany byæ w pliku o dowolnej nazwie z rozszerzeniem \textit{*css.scss}. Pliki musza byæ umieszczone w przeznaczonym do tego katalogu \textit{/app/assets/stylesheets.\textbf{}}\\

\newpage
\begin{flushleft}
	W plikach z rozszerzeniem musza znaleŸæ siê dwa kody:
\end{flushleft}

\textit{@import „Bootstrap-sprockets”\textbf{}}\\

\textit{@import „Bootstrap”\textbf{}}\\



\begin{flushleft}
	Wymagane s¹ równie¿ referencje do skryptów JavaScripts które wykorzystywane s¹ przez platformê.
\end{flushleft}

\textit{//= require Bootstrap-sprockets\textbf{}}\\

\textit{//= require Bootstrap\textbf{}}\\


\subsection{Baza danych}
W projekcie pos³u¿ono siê baz¹ danych Postgresql w wersji 9.5. Jest to jedna z trzech najpopularniejszych wolnodostêpnych systemów zarz¹dzania danymi. W Ruby on Rails wszystkie ustawienia bazy danych odbywaj¹ siê w domyœlnym pliku konfiguracyjnym \textit{config/database.yml.} W pliku znajduj¹ siê trzy œrodowiska:\\

\checkmark 
\space
rozwojowe \textit{(ang. development)} - jest u¿ywane na komputerze programisty aby mog³ kontrolowaæ zmiany które zaistania³y w projekcie\\

\checkmark 
\space
testowe \textit{(ang. test)} - s³u¿y do uruchamiania testów automatycznych\\

\checkmark 
\space
produkcyjne \textit{(ang. production)} - jest stosowane wtedy kiedy aplikacja uruchomiona jest na serwerze produkcyjnym\\
\newpage
Poni¿ej znajdujê siê kod œrodowiska produkcyjnego, zamieszczonego w projekcie:\\

\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Zawartoœæ pliku \textit{database.yml}]
production:
<<: *default
database: awaria_production
username: awaria
password: PG#sysawa88!!
\end{lstlisting}

\chapter{Implementacja}
\subsection{Interfejs graficzny u¿ytkownika}
Pierwszy interfejs graficzny zosta³ stworzony w latach 70, XX wieku przez firme Xerox. S³u¿y on do komunikowania siê cz³owieka z oprogramowaniem komputera, wykorzystuj¹c obiekty wyœwietlane na monitorze w trybie graficznym. Interfejs graficzny okreœla wygl¹d oraz funkcjonalnoœæ obiektów. \\

Sk³ada sie zazwyczaj z:\\

\checkmark menu\\

\checkmark wyœwietlanych na ekarnie ikonek które oznaczaj¹ obiekty i polecenia\\

\checkmark okien wyœwietlanych na ekranie\\

\checkmark 
funkcje dialogowe np. zapytania potwierdzajace usuniecie lub zmiane wydanego polecenia
\\
\newpage
W projekcie do stworzenia interfejsu wykorzystano framework Bootstrap który korzysta równie¿ z jêzyka JavaScripts.\\

Jednym z ciekawszych widoków, które mia³am okazje wykonaæ by³ panel logowania u¿ytkownika.\\

	\begin{figure}[!tbh]
		\centering
		\includegraphics[width=\linewidth]{panel}
		\caption{Nieostylowany panel logowania}
	\end{figure}

		
Kod odpowiadaj¹cy za widok logowania znajduje siê w œcie¿ce
\textit{views/devise/sessions/new.html.erb.}
Poni¿ej przedstawiam czêœæ kodu, który zosta³ podczas generowania, obrobiony kodem HTML w bardzo okrojony sposób:

\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Wygenerowany kod z podstawowym kodem HTML]
<%= form_for(resource, as: resource_name,
 url: session_path(resource_name)) do |f| %>
<div class="field">
<%= f.label :email %><br />
<%= f.email_field :email, autofocus: true %>
</div>
<div class="field">
<%= f.label :password %><br />
<%= f.password_field :password, autocomplete: "off" %>
</div>
\end{lstlisting} 

Panel logowania obrobiony kodem HTML, JavaScript oraz CSS przedstawiam poni¿ej:

\begin{figure}[!tbh]
	\centering
	\includegraphics[width=\linewidth]{panelhtml}
	\caption{Ostylowany panel logowania}
\end{figure}

\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Kod obudowany kodem HTML JavaScripts oraz CSS]
<h2>Zaloguj siê</h2>
<hr class="colorgraph">
<div class="form-group">
<%= f.email_field :email, autofocus: true, class:
 "form-control input-lg", placeholder: "Adres email" %>
</div>
<div class="form-group">
<%= f.password_field :password, autocomplete: 
"off", class: "form-control input-lg", placeholder: "Has³o"  %>
</div>
<span class="button-checkbox">
<button type="button" class="btn"
 data-color="info">Zapamietaj mnie</button>
<% if devise_mapping.rememberable? -%>
<%= f.check_box :remember_me, class: "hidden" %>
<% end -%>
<%= link_to "Zapomnia³eœ has³a?",
 new_password_path(resource_name), class: "btn btn-link pull-right"  %>
</span>
\end{lstlisting}

oraz kod CSS w pliku \textit{app/assets/stylesheets/custom.css.scss.}
\begin{verbatim}
.colorgraph {
border-top: 70px;
height: 5px;
border-top: 0;
background: #c4e17f;
border-radius: 5px;
background-image: -webkit-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
background-image: -moz-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
background-image: -o-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
background-image: linear-gradient(to right, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
}
\end{verbatim}


\chapter{Elementy funkcjonalne systemu}
\subsection{Uaktywnienie przypominania has³a na e-mail}


Konfiguracji przpominania has³a na adres e-mail u¿ytkownika, dokonuje siê w pliku konfiguracyjnym \textit{config/environments/production.rb.} Ze wzglêdu na wdro¿enie aplikacji na serwer Heroku wykorzysta³am dodatkowy element tej platformy do korespondencji z u¿ytkownikiem o nazwie Sendgrid.  

\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Konfiguracja œrodowiska \textit{production.rb}]
config.action_mailer.smtp_settings = {
user_name: ENV['SENDGRID_USERNAME'],
password: ENV['SENDGRID_PASSWORD'],
domain: 'awaria-system.herokuapp.com',
address: 'smtp.sendgrid.net',
port: 587,
authentication: :plain,
enable_starttls_auto: true
}
\end{lstlisting}

W pliku dane na temat has³a oraz nazwy u¿ytkownika, zosta³y ukryte i dostêpne s¹ tylko dla u¿ytkowników do tego uprawnionych. Wszystkie dane znajduj¹ siê na platformie Heroku. W sekcji \textit{domain} deklarujemy adres url strony pod który zosta³a wdro¿ona.  
\subsection{Uaktywnienie e-maili powitalnych podczas rejestracji}

W pracy wykorzysta³am element e-maili powitalnych podczas pierwszej wizyty na stronie, które informuj¹ u¿ytkownika o pozytywnym przejœciu rejestracji. Wiadomoœci powitalne wysy³ane s¹ automatycznie, tu¿ po aktywacji adresu mailowego. S¹ elementem podtrzymania dalszej komunikacji z klientem. Do zaimplementowania tej funkcjonalnoœci wykorzysta³am plik \textit{app/models/user.rb.} 
\\

\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Kod odpowiedzialny za wysy³anie e-mail powitalnych]
class User < ApplicationRecord
after_create :welcome_send
def welcome_send
WelcomeMailer.welcome_send(self).deliver
end
\end{lstlisting}

W treœci wiadomoœci, na adres u¿ytkownika zostaje wys³ane has³o, wprowadzone podczas rejestracji oraz logo firmy. Wiadomoœci przes³ane zostaj¹ w formie \textit{html} oraz \textit{txt.} Wybra³am te dwa formaty poniewa¿ \textit{txt} z pewnoœci¹ trafi do ka¿dego odbiorcy, natomiast wiadomoœci w formie \textit{html} mog¹ byæ nieczytelne dla niektórych przegl¹darek pocztowych. Ró¿nica polega na tym ¿e dziêki kodzie HTML wiadomoœci wygl¹daj¹ atrakcyjniej graficznie.
Treœci wiadomoœci powitalnych w formie \textit{.html} oraz \textit{.txt} zosta³y zawarte w pliku \textit{app/views/welcome\_mailer.}
\newpage

\begin{figure}[!tbh]
	\centering
	\includegraphics[width=\linewidth]{e-mail}
	\caption{Format wiadomoœci wysy³any w formie \textit{.html}}
\end{figure}
\newpage 
\subsection{Przeszukiwanie danych w czasie rzeczywistym}

W aplikacji wykonano dodatkowo przeszukiwanie danych w czasie rzeczywistym, umo¿liwiaj¹ce wyszukanie danych w tabeli. U¿ywaj¹c filtru, mo¿na wyœwietliæ tylko dane które nas interesuj¹ i ukryæ pozosta³e. Po przefiltrowaniu danych w zakresie tabel mo¿na ponownie zastosowaæ filtr w celu otrzymania aktualnych danych badŸ mo¿na wyczyœciæ filtr w celu ponownego wyœwietlenia wszystkich danych w tabeli. 
Filtr który zastosowa³am w projekcie zosta³ stworzony dla tabel: u¿ytkownika, stanowiska, dzia³u, zg³oszeñ. W przeszukiwniu danych dla jednej tabeli zastosowa³am kilka warunków. Podczas wpisywania fraz, program nie rozró¿nia wielkoœci liter za co odpowiada operator ILIKE .\\
 

\textbf{Tabela u¿ytkowników, filtrowanie wed³ug:}\\
\textendash\space imiê \textit{(ang. first\_name)}\\
\textendash\space nazwisko \textit{(ang. last\_name)}\\
\textendash\space adres e-mail
\textit{(ang. email)}\\

\textbf{Tabela zg³oszeñ, filtrowanie wed³ug:}\\
\textendash\space nazwa urz¹dzenia\\
\textendash\space adres e-mail\\
\textendash\space imiê
\textit{(ang. first\_name)}\\
\textendash\space nazwisko
\textit{(ang. last\_name)}\\

\textbf{Tabela stanowisk, filtrowanie wed³ug:}\\
\textendash\space nazwa\\

\textbf{Tabela dzia³ów, filtrowanie wed³ug:}\\
\textendash\space nazwa\\
\newpage

Do wykonania tego elementu funkcjonalnego, wykorzysta³am plik\\
\textit{app/controllers/zgloszenies\_controller.rb.}

\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Dane wed³ug których nastepuje przeszukiwanie]
@zgloszenies = Zgloszenie.includes(:user)
.where("zgloszenies.nazwa_urzadzenia ILIKE :q OR users.email ILIKE :q OR 
users.first_name ILIKE :q OR users.last_name ILIKE :q", 
q: "%#{params[:search]}%").references(:users)
end
\end{lstlisting}

W tym pliku zosta³y zawarte wszystkie dane które umo¿liwiaj¹ przeszukanie tabeli zg³oszenie. Referencje u¿ytkownika zosta³y powi¹zane z tabel¹ zg³oszeñ co umo¿liwia nie tylko wyszukanie interesuj¹cego nas zg³oszenia jak równie¿ na podstawie zg³oszeñ mo¿emy wyszukaæ w bazie u¿ytkownika oraz sprawdziæ jakie zg³oszenie z³o¿y³ i w jakim czasie.
Funkcjonowanie przeszukiwania danych w czasie rzeczywistym opiera siê tak¿e na kodzie JavaScript:\\

 \textit{app/assets/javascripts/custom.js}
\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=JavaScripts - przeszukiwanie w czasie rzeczywistym]
$(document).on('keyup', '.search_form_z input', function() {
$('.search_form_z').delay(200).submit();
});
\end{lstlisting}

Dziêki wykorzystanemu kodzie JavaScripts u¿ytkownik podczas wpisywania frazy nie musi dodatkowo klikaæ na przycisk, proces odbywa siê w momencie, kiedy w wyszukiwarke zostaje wprowadzona pierwsza litera, czas wyszukiwania to 200 milisekund. 

\newpage 
\subsection{Automatyzacja powiadomieñ}

W projekcie utworzy³am automatyzacje powiadomieñ która polega na byciu w sta³ym kontakcie z u¿ytkownikiem który zg³osi³ usterke w systemie. Poprzez rejestracje w systemie, za pomoc¹ adresu e-mail, na ten sam adres otrzymuje powiadomienia zawieraj¹ce aktualny status swojego produktu. Na powiadomienia sk³adaj¹ siê trzy etapy:

\checkmark 
\space
started (przyjêcie usterki) - etap na którym, nastêpuje zg³oszenie usterki w systemie\\
\checkmark
\space
inprogress (rozpoczêcie naprawy) - etap na którym, rozpoczyna siê naprawê usterki\\
\checkmark
\space
finished (zakoñczenie naprawy) - etap na którym, zakoñczono naprawê usterki\\

Do zaimplementowania tego elementu wykorzysta³am plik znajduj¹cy siê w \textit{app/mailers/customer\_notification\_mailer.rb} w którym zawar³am kod:\\

\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Opis statusów w modelu]
class CustomerNotificationMailer < ApplicationMailer
def started(zgloszenie_id, user_id)
@zgloszenie = Zgloszenie.find(zgloszenie_id)
user = User.find(user_id)
mail(subject: default_i18n_subject, to: user.email) 
end

def inprogress(zgloszenie_id, user_id)
@zgloszenie = Zgloszenie.find(zgloszenie_id)
user = User.find(user_id)
mail(subject: default_i18n_subject, to: user.email) 
end

def finished(zgloszenie_id, user_id)
@zgloszenie = Zgloszenie.find(zgloszenie_id)
user = User.find(user_id)
mail(subject: default_i18n_subject, to: user.email) 
end
end
\end{lstlisting} 
\newpage
W pliku \textit{zg³oszenies\_controller.rb} znajduj¹cy siê w œcie¿ce
 \textit{app/controllers} znjaduj¹ siê kody:
\\

\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Powiadomienia o przyjêciu usterki do naprawy]
def create
CustomerNotificationMailer.started(@zgloszeny.id, @zgloszeny.user_id).deliver_later
\end{lstlisting}

Metoda \textit{def create} odpowiada za tworzenie nowych zg³oszeñ do której przypisano status \textit{started}.

\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Powiadomienia o rozpoczeciu i zakoñczeniu naprawy usterki]
def update
CustomerNotificationMailer.send(@zgloszeny.status, @zgloszeny.id, @zgloszeny.user_id).deliver_later if !@zgloszeny.started?
\end{lstlisting}

Metoda \textit{def update} odpowiada za edycjê zg³oszeñ do której przypisano status \textit{inprogress} i \textit{finished}, bior¹c pod uwage to ¿e status \textit{started} podczas edycji, przy kolejnej edycji, nie mo¿e  uzyskaæ ju¿ statusu pocz¹tkowego.

\chapter{Testy}

\subsection{Testowanie aplikacji na urz¹dzeniach mobilnych}

Test optymalizacji mobilnej jest jedn¹ z wielu rzeczy, które s¹ bardzo istotne a z tego wzglêdu ¿e wiêcej osób na dzieñ dzisiejszy korzysta z internetu za pomoc¹ urz¹dzeñ mobilnych. 

Aby strona nadawa³a siê do u¿ytku na urz¹dzeniach mobilnych trzeba pamietaæ o tym by:\\

\textbf{\oldstylenums{1.}}\space Czcionka nie by³a zbyt ma³a - poniewa¿ wtedy strona staje siê nieczytelna i wymaga powiekszenia widoku w celu odczytania jej treœci\\

\textbf{\oldstylenums{2.}}\space Elementy dotykowe - czyli przyciski i linki nawigacyjne, nie by³y zbyt blisko siebie, poniewa¿ u¿ytkownicy korzystaj¹c z takiej strony maj¹ problemy z naciœniêciem wybranego elementu bez dotkniêcia elementu s¹siaduj¹cego.\\

\textbf{\oldstylenums{3.}}\space Rozmiar zawartoœci niedopasowany do widocznego obszaru - aby rozwiazaæ taki problem nale¿y upewniæ siê czy strona korzysta z wartoœci wzglêdnych szerokoœci i pozycji elementów css. Wa¿ne jest równie¿ to by obrazy siê skalowa³y.\\
\newpage
Aby przegl¹darka odpowiednio przeskalowa³a zaprojektowan¹ stronê do rozmiarów okna w pliku \textit{app/views/layouts/application.html.erb} nale¿y dodaæ meta-tag:\\
\begin{lstlisting}[language=Ruby,lineskip={-1pt},caption=Meta tag odpowiedzialny za skalowanie]
<head>
<title>Awaria <%= yield(:title) %></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
\end{lstlisting}

Testy na optymalizacje mobiln¹, wykona³am za pomoc¹ narzêdzia \textbf{Mobile-Friendly Test - Google Search Console}.\\

\begin{figure}[!tbh]
	\centering
	\includegraphics[width=\linewidth]{testm}
	\caption{Test optymalizacji mobilnej}
\end{figure}
\newpage


\subsection{Test szybkoœci ³adowania strony}

Test szybkoœci ³adowania strony polega na zbadaniu, to w jakim czasie ³aduje siê aplikacja. Im krótszy czas tym wy¿sza pozycja w Google. Wed³ug przeprowadzonych badañ im wolniej ³aduje siê strona, tym mniej czasu spêdza na niej u¿ytkownik. Wywiera tak¿e istotny wp³yw na przegl¹danie podstron przez u¿ytkownika i szybkie dotarcie przez niego do porz¹danych informacji co przek³ada siê na oszczêdnoœæ czasu oraz oszczednoœæ transferu w przypadku urz¹dzeñ mobilnych. Dziêki szybko dzia³aj¹cej stronie roboty wyszukiwarek mog¹ szybciej przeskanowaæ strone i wyszukaæ nowe treœci.\\


Po wykonaniu testów narzêdzie wskaza³o obszary w których miejscach nale¿a³oby u¿yæ udoskonaleñ, by strona ³adowa³a siê o wiele szybciej. Obszary dzielone s¹ wed³ug trzech priorytetów: wysokim, œrednim, niskim.
\\
Na podstawie badañ \textbf{PageSpeed Insights} aplikacja otrzyma³a nastêpuj¹ce wyniki:\\



Szybkoœæ dzia³ania strony na komputerach PC \underline{\textbf{89/100}} - udoskonalenia na poziomie niskim\\

Szybkoœæ dzia³ania strony na urz¹dzeniach mobilnych \underline{\textbf{71/100}} - udoskonalenia na poziomie œrednim\\

Wed³ug \textbf{PageSpeed Insights}, strone mo¿na uznaæ za dzia³aj¹c¹ dobrze, kiedy wynik w obu testach osi¹gnie conajmniej 85 punktów.
\newpage
Sugestie dotycz¹ce poprawek jakie nale¿a³oby przeprowadziæ:\\

\checkmark {\space} Wyeliminuj blokuj¹cy renderowanie kod JavaScript i CSS z czêœci strony widocznej na ekranie. Strona zawiera blokuj¹ce skrypty (3) i blokuj¹ce zasoby CSS (3). Powoduje to opóŸnienia w renderowaniu strony.\\

\checkmark {\space} Wykorzystaj pamiêæ podrêczn¹ przegl¹darki. Ustawienie daty wygaœniêcia lub maksymalnego wieku zasobów statycznych w nag³ówkach HTTP powoduje, ¿e przegl¹darka wczytuje z lokalnego dysku twardego zasoby pobrane wczeœniej, zamiast ponownie pobieraæ je z sieci.\\

\textbf{Przestrzegane regu³y, które zosta³y wykonane zgodnie z wymaganiami:}\\
\oldstylenums{1.} \space Nadaj priorytet widocznej treœci: Czêœæ strony widoczna na ekranie ma odpowiedni priorytet.\\
\oldstylenums{2.} \space Skróæ czas odpowiedzi serwera: Serwer odpowiedzia³ szybko.\\
\oldstylenums{3.} \space Unikaj przekierowañ stron docelowych: Strona nie zawiera przekierowañ.\\
\oldstylenums{4.} \space W³¹cz kompresjê: Kompresja jest stosowana.\\
\oldstylenums{5.} \space Zmniejsz CSS: Kod CSS jest zmniejszony.\\ 
\oldstylenums{6.} \space Zmniejsz HTML: Kod HTML jest zmniejszony.\\
\oldstylenums{7} \space Zmniejsz JavaScript: Zawartoœæ pliku JavaScript jest zmniejszona.\\
\oldstylenums{8.} \space Zoptymalizuj obrazy: Grafiki s¹ zoptymalizowane. 
\newpage
\subsection{Walidacja kodu}

Walidacja to inaczej proces weryfikowania poprawnoœci sk³adniowej pliku XHTML. Wyróznia siê dwa rodzaje takiej poprawnoœci sk³adniowej: po³¹czone z kontrol¹ zgodnoœci z oficjaln¹ specyfikacj¹ XHTML, gdzie zastosowane zostaj¹ serwisy siecowe tak zwane parasery oraz sprawdzanie wy³¹cznie poprawnoœci sk³adniowej w tym przypadku sotosuje siê specjalne programy do tego przeznaczone czyli walidatory.\\

\textbf{Dlaczego zatem nale¿y u¿ywaæ walidacji:\\}
\oldstylenums{1}\space Poniewa¿ je¿eli kod strony jest poprawny to prawdopodobieñstwo ¿e strona bêdzie dobrze wyœwietlana na wiêkszoœci przegl¹darek jest wiêksza.\\
\oldstylenums{2}\space Gdy strona nie zawiera b³êdów to szybciej siê ³aduje, gdy¿ nie musi zastanawiaæ siê jak interpretowaæ nie w³aœciwie zamieszczonych znaczników.\\
\oldstylenums{3}\space Mo¿liwoœæ wykrycia i poprawy b³edów przed oddaniem strony do u¿ytku.\\
\oldstylenums{4}\space Dziêki walidacji mo¿emy nabyæ dodatkowej wiedzy o jêzyku XHTML oraz w przypadku zmiany specyfikacji.
\newpage

Do walidacji kodu u¿y³am narzêdzia dostêpnego online o nazwie \textbf{W3C} znajduj¹cego siê na stronie https://validator.w3.org.\\

Wyniki walidacji wykaza³y niewielk¹ iloœæ pope³nionych b³êdów, ³¹cznie siedem, ni¿ej przedstawiam wybrane przez mnie trzy:

\begin{verbatim}
Error: Unclosed element div.
From line 52, column 7; to line 52, column 38
p">  <div class="col-xs-12 col-md-6">  

Error: Unclosed element fieldset.
From line 35, column 3; to line 35,
column 12
set-3">  <fieldset>  < 

Error: Unclosed element div.
From line 33, column 1; to line 33, column 17
ntainer"><div class="row"><div   
\end{verbatim}

Kod CSS wed³ug walidatora zosta³ napisany bezb³ednie: 

\begin{verbatim}
Aby pokazaæ czytelnikom swojej strony, ¿e stworzy³eœ stronê interoperacyjn¹.

<p>
<a href="http://css-validator.org/check/referer">
<img style="border:0;width:88px;height:31px"
		src="http://css-validator.org/images/vcss.png"
		alt="Poprawny CSS!" />
	</a>
</p>

\end{verbatim}
\newpage

 
%-----------Koniec czêœci zasadniczej-----------

\begin{thebibliography}{11}
\bibitem{wikibook}
U¿ytkownicy Wikibooks.
\textit{Ruby}. 
Wikibooks; 1 edition (February 17, 2008).
\bibitem[2]{H} Nicholas J. Higham, \emph{Accuracy and stability of numerical algorithms}, SIAM, Philadelphia 1996.
\bibitem[3]{H2} Nicholas J. Higham, \emph{Functions of Matrices. Theory and Computation}, SIAM, Philadelphia 2008.
\bibitem[4]{DJ} Maksymilian Dryja, Janina i Micha³ Jankowscy, \emph{Przegl¹d metod i algorytmów numerycznych, czêœæ 2}, Wydawnictwa Naukowo-Techiczne, Warszawa 1982.
\end{thebibliography}
\tableofcontents
\clearpage
\pagestyle{empty}
\noindent Warszawa, dnia ...............
\vspace{5cm}
\begin{center}
\LARGE{Oœwiadczenie}
\end{center}
Oœwiadczam, ¿e pracê licencjack¹ pod tytu³em: ,,Awaria - System rejestrowania usterek i napraw'', której promotorem jest dr W³odzimierz Bzyl, wykona³em/am samodzielnie, co poœwiadczam w³asnorêcznym podpisem.
\vspace{2cm}
\begin{flushright}
...........................................
\end{flushright}

\end{document}